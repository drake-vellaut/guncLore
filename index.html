---
layout: default
title: "Stars Reach - GUNC Lore"
pagination:
  enabled: true
  per_page: 5
  collection: posts  # Add this line
---

<!-- Header -->
<header>
  <h1>GUNC Lore</h1>
  <p>Stars Reach MMORPG - GUNC Lore</p>
</header>

<!-- Navigation Bar -->
<nav>
  <a href="{{ '/' | relative_url }}">Home</a>
  <a href="/tags/">All Tags</a>
</nav>

<!-- Search Input -->
<div class="search-bar">
  <input type="text" id="search-box" placeholder="Search lore..." />
</div>

<!-- Main Container -->
<div class="container">
  <!-- Main Content Listing the Posts -->
  <div class="main-content" id="post-list">
    {% for post in paginator.posts %}
    <div class="article">
      <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
      {% if post.image %}
        <img src="{{ post.image }}" alt="{{ post.title }}">
      {% endif %}
      <p>{{ post.excerpt }}</p>
      <p>
        Tags:
        {% for tag in post.tags %}
          <a href="/tag/{{ tag | slugify }}/">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      </p>
      <a href="{{ post.url | relative_url }}">Read more...</a>
    </div>
    {% endfor %}
  </div>

  <!-- Sidebar with Featured Video -->
  <aside class="sidebar">
    <h3>Featured Video</h3>
    <div class="video-container">
      <iframe width="560" height="315" src="https://www.youtube.com/embed/13_aCZ0s-E4?si=kUgd9AW2I3UiuWbC" allowfullscreen></iframe>
    </div>
    <div class="video-container">
      <iframe width="560" height="315" src="https://www.youtube.com/embed/ryZqFhj_Quc?si=jm9J1Z7BRyY4Vjay" allowfullscreen></iframe>
    </div>
  </aside>
</div>

<!-- Pagination Controls -->
<div class="pagination">
  {% if paginator.previous_page %}
    <a class="previous" href="{{ paginator.previous_page_path | relative_url }}">&laquo; Previous</a>
  {% else %}
    <span class="disabled">&laquo; Previous</span>
  {% endif %}

  {% for page_num in (1..paginator.total_pages) %}
    {% if page_num == paginator.page %}
      <span class="current">{{ page_num }}</span>
    {% else %}
      <a href="{{ paginator.paginate_path | relative_url | replace:'PAGE', page_num }}">{{ page_num }}</a>
    {% endif %}
  {% endfor %}

  {% if paginator.next_page %}
    <a class="next" href="{{ paginator.next_page_path | relative_url }}">Next &raquo;</a>
  {% else %}
    <span class="disabled">Next &raquo;</span>
  {% endif %}
</div>

<!-- Footer -->
<footer style="text-align: center; font-size: 0.9rem; color: #888; margin-top: 3rem;">
  <p>
    <a href="/privacy_policy.html">Privacy Policy</a> &nbsp;|&nbsp;
    &copy; 2025 GUNC. All Rights Reserved.
  </p>
</footer>

<!-- Fuse.js Search Script -->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>
<script>
  const searchBox = document.getElementById('search-box');
  const postList = document.getElementById('post-list');
  let allPosts = [];

  fetch('{{ "/search.json" | relative_url }}')
    .then(response => response.json())
    .then(data => {
      allPosts = data;
    });

  searchBox.addEventListener('input', function () {
    const query = this.value.trim();
    if (!query) {
      location.reload(); // fallback to paginated view
      return;
    }

    const fuse = new Fuse(allPosts, {
      keys: ['title', 'excerpt', 'tags'],
      threshold: 0.3
    });

    const results = fuse.search(query).map(result => result.item);
    renderSearchResults(results);
  });

  function renderSearchResults(results) {
    postList.innerHTML = results.map(post => `
      <div class="article">
        <h2><a href="${post.url}">${post.title}</a></h2>
        <p>${post.excerpt}</p>
        <p>
          Tags: ${post.tags.map(tag => `<a href="/tag/${tag.slug}/">${tag.name}</a>`).join(', ')}
        </p>
        <a href="${post.url}">Read more...</a>
      </div>
    `).join('');
  }
</script>
